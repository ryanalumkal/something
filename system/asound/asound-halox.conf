# ALSA configuration for HaloX UACDemoV10 playback and Camera capture
# Hardware: UACDemoV10 (playback) + Centerm Camera (capture)
#
# This config provides abstract device names that applications should use:
#   - lelamp_playback: For audio output (livekit, spotifyd, sox, etc.)
#   - lelamp_capture: For microphone input (livekit, VAD, recording, etc.)
#
# Uses dmix to allow multiple applications to share the same audio device

# Set lelamp abstract devices as system defaults
pcm.!default {
    type asym
    playback.pcm "lelamp_playback"
    capture.pcm "lelamp_capture"
}

ctl.!default {
    type hw
    card UACDemoV10
}

# ==============================================================================
# ABSTRACT DEVICE LAYER - Applications should use these device names
# ==============================================================================

# lelamp_playback - Abstract playback device (use this in all applications)
pcm.lelamp_playback {
    type plug
    slave.pcm "hw_playback_dmix"
}

# lelamp_capture - Abstract capture device (use this in all applications)
pcm.lelamp_capture {
    type plug
    slave.pcm "hw_capture"
}

# ==============================================================================
# HARDWARE LAYER - Maps abstract devices to physical hardware
# ==============================================================================

# Hardware playback - UACDemoV10 with dmix for sharing
pcm.hw_playback_dmix {
    type dmix
    ipc_key 1024
    ipc_perm 0666
    slave {
        pcm {
            type hw
            card UACDemoV10
            device 0
        }
        rate 48000
        channels 2
        period_time 0
        period_size 1024
        buffer_size 4096
    }
    bindings {
        0 0
        1 1
    }
}

# Hardware capture - Centerm Camera microphone
pcm.hw_capture {
    type hw
    card Camera
    device 0
}
